language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
env:
  global:
  - secure: J5SD2+ANLk+L/2swCVotD3z9ijMjkKy8cMNlqwICl8bunI6sXs8uPOmQqOd57CJMfFYV0XEQAvzEUo4iknrqrXtdVSHEH1D4bDvH0iRP457jNOvweLbzos890CtCZUiLrs8kLAqXwCgjQPNFSRFd7uc/UFGEuPRS7FiX2pHnWVYsYxAFxMuRPMhnxWjzF1K0OCbrtBtOMRC/QMTxSA/Q1BCy0fbrPEY3MnuTwbQdYejIpAs+kDD2wrzFEFqR/EHWn6DnrYADEjHkCyTHHfRB/6r8tMedW8OUAaOD5rc7dchEhRgPQyj+RaR18WaS8pIBYgB2QlQDYsOD2DhdHWbvNFw6VpuK3RiR92JWZ/o16Gf2DKLjIfWmbe3N9aZWIdghrzlzGqhQS0SDWBnXrN/Vo23srarnnj2xmZOfNtDfgwz3lvfcgYPhuPEbQOc1iC7bpJ/Qvz/wRgsoPqQjNFouwarHXF95m68Nx7wDWGY6sfxPzITbgktNaC8fm8rrfN3ZjWysvOn+KtTcNbN0KHwAJlO0PeVONZDIUsqZQ8mOEUiR4W9v8VCBmQQK8uf24oT6FVN93DfxHOpb3IM/4dOMClVdD8Gb86t23y8ylV2cmz5TvOj6pA99zgrDG0tIFbmEEIIPHcLfLvgJ79Fy9hHDKqGws4/a6zG4rVp2U2lpAk4=
  - secure: WvuPXnvGWpTWKuLDkLZXdSXj+F6uEbwo7jqcAQEOOpTFdn8Cc3Xf0pTKWsOe/2/eXNL5/o/JKVevP/Cq6qMksmi9icGZmHRa+jwMNysBXZJSmuiyR1XaACQPdOJ2CcVRseGocsREyKH9H04z4031bazpQ/7zMAtB0p0kK2qjTZe2mws193yM3gPFfceQOd93lMNaDXLuu+H35d9XGgwikqX80SGZ8N/UTizSQ44EiWN9ooqTt4/ltNPLEWQdJ7NMd6+d4KANERLNbQ9eXT4cyNf4fq+T9KYEz0e4zwo3TKjsENF1lRsDtGsGsdyn7dGAFa69DZ92MBNEUOPZxQyd4wO5DOfdY1vpxNeQNwQ1eRAoZFySBzsDsKhXSWi5wSMnr2xN98KgLo7r50ZiYQFsifqNvstFLA0VAbqo0pp5LDOI5u1gbQYA3WULMWMUokSH3Gw2HRpcXv97A8KCmoveFbLAQCUgyf6O428vGUxaX6t6kqXGCwaMOnPnhLK5oB0dg9U0T7vLeK2fKhkGIU8uOgXFyHjvdqq2J2AiyvAJkzb3LalfvhA4U4sNAbmz5Gkmma8/kFPKWH8dR5Zd11WZ9eqZLiLmZojTZEIz09bkKozSQ7VRSvgrpYDiSO97Nim5sc/QYvNP+HVmoXMCsXn4Q+r6wsa+dpmObnvZMRR+Hpo=
  - secure: OygAG0WzesKbxJZOmEf878Ua4dtEDgfnalFSwM44M4VSphXblbmnwPeyPPYsDTY+CsNvdwN91y+IaChlcVzfsJdp/fLb1QA+BB2ayKbQoiMsQTZTdT4VIWEHJgr5LBG6oUCUOcTJuVo6n0UWVrJdPmCjm9VyKVdeJSvCDkqZjJyEnDONwqZ3AasaFhtYsI5iefLtCe6RJ7fte3hWhV9fob4+cdJp5YrYoH5i0DZ39r+YdcYgQs0KM/xbFZMxGF2odbWcVzy2+kdhjBSTQCsEzxYPv+iggZKXAP0jhMkXWoni+TVQCWJLhdFRzid+x2wbknFf20BZ3kft9f9Vanex2nKP0ncwFYxnfY/LEG9UrUmShGoHcA5MhZl0JOjrFlakfaBZ1RUqSPzr/7ZQmb76TUS7KvxKjmlsW4G688O42jiujuZYJcKxsivegrl9DkG6h4UudjxjquCA1iqigjjnIscv4u+gMtFubTdeiPb5axSlpNonMjGck60bXQW1pgr8csSLFrt7g7OhS+c2xcE4+gWIzciBoFNYCLMLa9r78IjSijAVF0U+g3jdsZd8srIQgyp8vivM4obnNcVAeaa99NcUgjH+9HPzrHZBe/GCDJAtjMTDm0w6haDDSFXfX/5NXh9DiYemk2nQltcB2OI4eBrhtjEP93MPhZSEAMLV3wk=
before_install:
- export TZ=Pacific/Noumea
install: mvn install -DSkipTests=true -Dmaven.javadoc.skip=true -DcreateChecksum=true
script:
- mvn versioneye:update test jacoco:report
after_success:
- mvn coveralls:report
before_deploy:
- export RELEASE_PKG_FILE=$(ls target/*.war)
- export RELEASE_PKG_MD5_FILE=$(ls target/*.war.md5)
- export RELEASE_PKG_SHA_FILE=$(ls target/*.war.sha1)
- echo "deploying $RELEASE_PKG_FILE , $RELEASE_PKG_MD5_FILE , $RELEASE_PKG_SHA_FILE
  to GitHub releases"
deploy:
  provider: releases
  api_key:
    secure: l3eMBQvWIyRjgn1Y2Z5hzcylPn9vJG0cQUGmfbpvMZCMD0RgV9V5ZjsEAMc5ZtYp/H1HlcfdNVc5sHjlaxQ+5rwmHhTWNow/pOXyBjtbdqEdsL2CdTQcxf74Zj3uJZMFNlKi5eSCSHDd2qfeZoTQTc3M6iq71SFUD0N5vnl+6sTxenVPy27x9AHf4c7hAiBJivHLDKB+Vsol+ARuSvEMPMyVPEEbGhona8a9J+xVkA5Ur+SfmkmgJttWPmImjOIIq6eVhBdjBnMonaWbhrscfKvSHZEPgj+eo2ZK2o/MxDp3uhwk6CxQZxm+a2ss9PvV1nQ9+pCiMqu1ZabogeZ3b0J+8YfO2LT7KYJEWIcFRK+fwC/ZLPCrKhnsDFP4YTTcD6Fp9NkGj0j+H6+0RYi0My871rZfqS96EHpEw7cLkPwtnbh4/YBmeA5yDQ5mR3F+iW2f70OhuqJC+MAitnfgXPKzEI7cti9zcEduttQZBK8u061KnbDtsz/aZLMDapXxMQKvYogkTRaDPNqZ11syvRuKFkzNINFQ8QV+wBpSDqmujozLrF350PtueDfVNAOH7/ple3HQBalKenNjpU900B+U6ZAF2H4Q+DaTUJr5PasndryXvKeMGVi71+RVx+O/KXKclUvh8KjiEQGoGoXYWzNlW3q04QvJo4PDteAn974=
  file:
  - "${RELEASE_PKG_FILE}"
  - "${RELEASE_PKG_MD5_FILE}"
  - "${RELEASE_PKG_SHA_FILE}"
  on:
    tags: true
    repo: DSI-Ville-Noumea/sirh-kiosque-j2ee
notifications:
  slack:
    secure: KBYV56f2yQ83IkutVFWA6Jj7vjrEmTssNIgw1govwfSqQ8Co3Da8SlT2B8T/qGkVD4shwtEj6lSeJVCSQjWVFK7xXdMkK4CTvVXZH7qE4nIFCWJdS0oClnmR3raaBw7ZkIh2ac+GG0/5+NouMhL6zCbfNk+l3hzv7J3cF36R6SMdxwaRG8Z6NKkDcLPISzUGyzr/iXSMhvO8WrSMy/0QyM2z4O4OIcK6OoEKhk50mbDrSRQ0deCbLFv5vByfOSAgSogkP+Iv+6r+F4cBA7z5o9LeNiQWqfCWTZ+7SWqIV09AD0vpJB6YabqwX6vyr9MgVlv8i0b7aM6w8l6dCtzKOSVwhu9BUjfyglEHh1Noom/eROjC7YD0r6y8JDd15fFRPQiOxjMISemys/nwi63aNIUSiULmnY4WuYQl0gJPDvJ/qa3AKV58nTyeOrEjg+CBaPkTDPAsNxS8oITSJOPdK2+iLq9UwbX3VZLhh0GZb3r8MvBKqAUja3OpHbV8RMbQ70JSOCWFJnRr91xoOiSpLE+tgW7BcmbumywbqlS7eazaxC3EjLZlWBAdF5h6fHniafk0hiIujdc+wQPwDb9VRuWKvipCAMxX5N1FgYDuov7N4t9RqNC2NtYrYPO45PI8LVMvv5PfYTwGdgJWQtQtcW//vbyDHI04i6OGFgX7jG8=
