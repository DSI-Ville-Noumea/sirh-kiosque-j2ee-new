language: java
sudo: required
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
env:
  global:
  - secure: qYXfVOPms7IbPSqFSqObR/2jOkBpNS69ygwRE2wiGarKfWyLSoBQWiVRn43p/UhPcfJJof5XRVPUkxqc64bvSHR2GusqgHzOe5/G41BsHXTGHkddY1UX2Jfm1FO3l1XKRoHYvHytDrHfNpSwL5lR0e0Dr5bn76RpB2inwhwhBFlSUq+x5jO0PDvRIYjG+XLlpwpMb6n9qeowozW9cw0lcGguRVB788WsiygJubP57U8D9GqKx/WNpGC6ibErCghK5K1iRXCja2ynSSgVD5N8WQZWmWSeu1EsLQaxlsT6a7oTzspduI1S8BYqQtHuVaw/smONKHQEe7O6TQJdbh5D+c2abBDHpPASK00Tkr/MnB+sUZKGUR+ZKTbsx+iAcZuSg11MoIu779JWqlHCT5tG1AGAZ26T3CQYv/OZ6OGwaux+FzBieVw/twRKyYI6uokBb/ElKAnoBeE1WoKUi2ZTNMxJhKNGfta1wyjqQy3uDIwvjsZ4O+ae7hZ30l4PxfvlWjITJwCfQl7Ei4s3wdu8RMaWb8nr6m7NCmPlVmxgTXwAaLHPm3tkyuMv6bh9EXEiUUewdAfRSXVaBjAJbyKzINoSQOzTfKkZEdgpSuRGvMG2PO1Cns+KbxuPcJXLd5vVOFeoltq5eA3B2l/9uGKV556zO3PCQf5ISrUhr5NPTqQ=
  - secure: crVcnafwQDN6iK+WnlfYcg0LUFwdeYKOSX2U4zX9hgRn/CImsa0mnDoyTghqqUAgtClZpxHGoZmNf1KyHGiag2qFfJvWdWAh5cgqR8xjIPPna8rt5PFZT5d4qZnsTu+j8G87xcr6PMVfwkaGxbjGqZJJ6SwE6Nw21wrxLg6/G1SzYgUKXFZw8FLneYels3IjFj+4e7EqESqYOIN6UxyYg7I0tnQe90tKfzR7GyGvx5+sBDrej5iaN+CjITxsriiUEHObtQMyBd2j79mPxKv7hKf943gGTzKyXGzYcwEESab+6tLLWfkvHe8EzOM6kAHXphO/Jb2rtYlanvSRfAb22/YkTGSSQhWFaST/l3KWazeTVlD8xFvkuPjt1Ms7HIkexxKPszkGkF8lsxr/xKMZ1X0rfZQSiJSdyvSHOrYdjJmqOYGY+dT5lqtfphB+TBLMrALFBhSk539nkyqT7l9FSkAWLOXrUZfssxWLICaFGoYFbbZ8JjnXbXOtFAuba8yFWr56DR4NgBxGl36RKtrYg52qqfI0gPlGTQPbkwnfRVW99NgDPVwi6bz8qFtbaJWB1O1lL3FsqXFTeqP4jKdAx3vszuJCNXRYUPKMPbAaAEHuwjinVLPKaBnJLXoyhFcNZUsloFliIONpxZ5mrzVgaTdVNROZ7LhDpCOwy++3cLI=
  - secure: dfzFEHAdAQuLg2MAwKgnRZ7uPn4Z6ovJKqz4oa1o10K1wbfgwuVisI7TY9mG9P+zZCTDTNfXqGU597vMY7bR0geoSWAh2L2ydvEmcE7QgQ2eqX73pFYZVNic3UB8ua5as9wF24i3QIR0ijHlfZBLawovnn8+a+dl9Wh0ekA/MYLW2XWahJ2xxnXoODGEyJQPICFmp9Y1TA8AuYAj5f/PZ9msJHiJ6a0m2bQATOvwN1vfOPVJ8GdP+h7ZA/Ga44BGjcCN70qMc0JHNdRUaCDPoGKcPwAHsB2V76eoGQ8KEBZbcf8qjIlMN5aDMg1Sq4lt3djWbEbwzBuviWiHk5HFqjkul8sBxtVKf4flLQnrsmoD1NYjoUi/buDXBLjV9Hq/NwD9A3BOz1NDTJGwSa1Axtaw5SxRRXxgdHsQfJufqXl+fdvdsSu48Z/+nTe2JCi1D/vZQidVl+OwbUR33pike1EPoCp3aNf4N63EG2s1xwyhluhbf/CrFJEJtWwYPsSknnQrujGuawg2KtjIi6hSe3I/5bzPuyVmEhkq10XrAktJwylcPJUgEXCGPJ1d0tBpjyfvNm5OLJlbCcoTOWr0Jk/l+SXfB/qMZ1c/ggrne292hvkMcCjNiVzyPu0zuETKp5W2YXSXJ5fSN9K091DGHOBAA8uzOQGLbRsj8xVI0L0=
  - secure: mWI8tCQs33BhsVi63/61xwFau6ovCWR5io9NP3p76EniN6gK5BsH1aNBgDY1WL+Fh02Jr1vxtKgdzIUJNYDO30lx7SbmyRfFrsEmuD3FK3gzWdJ29a5USmb+01wPhuz5/wgdiJU5N93SAFN99/sHQqBGvB3lH4kE+5DGGDrHqXn+Fg6q3H0Os/+mkOi9eYnpfexEQGcM/VoTCt/quwBIdm2rZNY7MioyeoV7f6LkCZpQI58+cM7UlyNINu0HKoq8rlCrtrg/cArPPNNKMVU194wJVkszZ335FYnUqZDQ5HywDLtyjxeI4AvQEMlL8ll3szVsK/RVCE4dynO4laBbQRnOlNVkSiackppSrpJfSjSSnlkK1jM8SofW+sE7H7UMYTLExPW0DxbpYznsz/Ph/M1FATegvv/uf0ch8z7kNUbNKNkiAbz8eNP5Vj5p88I/+aWNzKSWuPttXn3CgHKIz9o8L8LEl7ZaNEvD1tuBg2QIHtQb1/p3qyC5Jq3AziZFXn8B5twFJdQNurX6562QQkesaRCUWasTlnSirl7CIR9kL6ojEeAnEKwQAbTyyYUJ9WkpRY+bgj12/iXfV4L57bofw+Tea+dUqfownJdX3aDkyXdGtZL0wf5tnC0fItGx+95vd9j0GGpXOSTfXVmMvPRmVeSAzP1mopEHWZrVdCs=
  - secure: RD4SHiu3CzDkUtXHg15QATRkMFVLhMgrtn8iGhTt7AoskZQmSh2oQlGJ+jtdwiWDNLy31Qd1t6e9VYgo3fh+MB703S7DGT3b36TScBU6hOqckKRJ0/i/LGPstMoSsRCMp7ac/8N/XbTE3XiULsFDCP8tDuhGeoAW3nr4fiie2SkAY2yq0H3uqXDrS2OxL57sayqh+k5ctzmJtsGesQKYw6sKPGPlsZQlcQrdYI2EZ4R+bbPTio7FFloFjqpQWVqS7BSvQeV527qUxNwCo0hGeBHcw+a4TkMai/ZzYiUSKrfFPJrvqWDp76gkC7TdBPesmoAnv4Ft0AggS5OHRT12wmspyh76UqhgtCS3tWJmm7ux330Nd8NXp+U70i4uffoo9NvLrMCFNJ5GnjJEP/g+8UNDWTz3ylDkuv3F6lZBw64zdmwX9AyKpZdMdU7aEwV+lI4VXGKcr7SOTLyCHUYJAALyC3I+yRR3EnuKCWx0g2cVb7KAdhNzv8/KDlJXcdMP1LMDvLCdtXXvbT1GU5ZAzOJx8G8pEEEb/VHxUIJmY+f6yyRqrsI+3oGxbQH3ewXbfk9nqpm8W4oCFgVqAr+rzfKp2C5TpJUEJfn6ItrcuK/pZYmKlTvXpmtguadbS3YO0/EEDC6dM8+Cuo/mU4evaE/FN/XTj0Ruy7RogBLxZYg=
before_install:
- mvn install:install-file -DgroupId=com.PDFjet -DartifactId=PDFjet -Dversion=1.0
  -Dfile=./lib/PDFjet-1.0.jar -Dpackaging=jar -DgeneratePom=true
- mvn install:install-file -DgroupId=com.javaplanner -DartifactId=javaplanner -Dversion=1.5
  -Dfile=./lib/javaplanner-1.5.jar -Dpackaging=jar -DgeneratePom=true
- export TZ=Pacific/Noumea
- git clone -b travis `git config --get remote.origin.url` target/travis
install: mvn install -DSkipTests=true -Dmaven.javadoc.skip=true -DcreateChecksum=true
  --settings target/travis/settings.xml
script:
- mvn versioneye:update test jacoco:report
after_success:
- mvn coveralls:report
before_deploy:
- export RELEASE_PKG_FILE=$(ls target/*.war)
- export RELEASE_PKG_MD5_FILE=$(ls target/*.war.md5)
- export RELEASE_PKG_SHA_FILE=$(ls target/*.war.sha1)
- echo "deploying $RELEASE_PKG_FILE , $RELEASE_PKG_MD5_FILE , $RELEASE_PKG_SHA_FILE
  to GitHub releases"
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: CuK2E79eZZjpahlOwmrBDD5UanRQtdIjydSXreXFpp5HHHvjhXkK0cqJvqJ7oyOJIZgu4Z5feuXnnr8FgZimtL9ZEZBSMpijBnyM47818hBcr+l0DbEuneyXjmByG8uMxTI/PrQmu6GUJ4xfiQPxK+CrOIiOUQgVGfTWTq5+bxHbEMTH/XP3RW643C6EU6tSLLQ1Gu3pgfb6WOjAV1eRZCPtwLVmXHfdZElzkPQdoBmQf58+/PpoUc23+zC2X5GfEClpF+UgRmfEPaBG2xpQse62RNlQB3Odt1e2pR2aZ0kOd7BsW6EXSJCOVHz0AnUkMBxmEskIlCXq4LDf7CblS8iO778lmyZ9KIKQos9f/txgeKzIbciifGMtGml8zp6k931DHZUMcrCJX3lHPp4G03w/Zy3aE6JsAbrNUxgpN1cZaZDnyEgD6eGtX93zqi0WP9Zr8OvX1I2LpWXZV8knoVF3N3IvHB5KpH7CpdLGBT48SE9khysc8Z47M3S/o9Wa1olaQnbwwVTeq0QEfT6508HipLv/5CjOLYEcPsP4sXjy0rK+Su0EycXeRQQ9DIXPzEyKau4WGB8JT7stY1qosmwTc9pCVb1yVxYJupw1z9tP9O23tkGvX4urFxEB7cudmZV/Bj6elhbGdMogYLzqtrrTAPM0NjfNWQfRQopJiQo=
  file:
  - "${RELEASE_PKG_FILE}"
  - "${RELEASE_PKG_MD5_FILE}"
  - "${RELEASE_PKG_SHA_FILE}"
  on:
    tags: true
    repo: DSI-Ville-Noumea/sirh-kiosque-j2ee